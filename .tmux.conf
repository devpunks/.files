############################################################################
#  _
# | |_ _ __ ___  _   ___  __
# | __| '_ ` _ \| | | \ \/ /
# | |_| | | | | | |_| |>  <
#  \__|_| |_| |_|\__,_/_/\_\
#    - https://man.openbsd.org/OpenBSD-current/man1/tmux.1
#
# `property not found` issue:
#    - https://github.com/tmux/tmux/issues/1689
#
#  Cheatsheets:
#    - https://devhints.io/tmux
#    - https://tao-of-tmux.readthedocs.io
#    - https://jdhao.github.io/2021/01/25/tmux_cheatsheet
#    - https://www.seanh.cc/2020/12/28/setting-options-in-tmux/
#
#  WIKI:
#    - https://github.com/tmux/tmux/wiki
#    - https://github.com/tmux/tmux/wiki/FAQ#how-do-i-translate--fg--bg-and--attr-options-into--style-options
#
############################################################################
# run-shell - https://unix.stackexchange.com/questions/80473/how-do-i-run-a-shell-command-from-tmux-conf
# display-popup
#  popup-style, popup-border-style [rounded|simple|heavy|double], popup-border-lines
#  - https://github.com/tmux/tmux/issues/1842
#  - https://aliquote.org/post/tmux-little-hacks/
#  - https://blog.meain.io/2020/tmux-flating-scratch-terminal/
#  - https://gist.github.com/LintaoAmons/22f6184b26bd5b93d8fe9f9276f50f75


############################################################################
# {{{ Options
#  - https://superuser.com/questions/758843
#  - https://superuser.com/questions/1425921
############################################################################

# set-option -s(erver) --------------------------------------------------------
%hidden BAR='BAZ'
# set-environment -g DEVPUNKS 😈ROOOCKS
#backspace=BACKSPACE
# show-environment -g
# display-menu '😈devPunks'
# display-message '😈devPunks'
display-message -p '#{BAR} #{PREFIX} #{DEVPUNKS}'
# Interesting! ENVVARS only available via `display`
# set -s @pwd="#{PWD}"

set-option -s editor vi
set-option -s buffer-limit 10
set-option -s message-limit 100
set-option -s prompt-history-limit 100
set-option -s history-file '~/.tmux_history'

# set-option (session) ------------------------------------------------
# set-option default-shell ''
# set-option default-command ''
# set-option allow-passthrough on # escape keys
# set-option default-size 'XxY' # e.g. 100x100
set-option escape-time 50 # https://unix.stackexchange.com/questions/608142/whats-the-effect-of-escape-time-in-tmux
# https://blog.meain.io/2020/tmux-flating-scratch-terminal/
# set-option -g repeat-time 1000 # holding arrow keys
# https://unix.stackexchange.com/questions/307696/how-to-increase-tmux-pane-numbers-display-time-ctrl-b-q
# set-window-option -g  display-time 0 # (milliseconds) press any key to cancel

# https://stackoverflow.com/questions/21947123/prevent-tmux-from-displaying-activity-in-window-n
# ittps://unix.stackexchange.com/questions/78093/how-can-i-make-tmux-monitor-a-window-for-inactivity
set-window-option -g visual-bell both
# set-window-option -g visual-silence both
set-window-option -g visual-activity on
# set-window-option -g monitor-bell both
# set-window-option -g monitor-silence 1000
set-window-option -g monitor-activity on

# set-option bell-action any # current
# set-option activity-action any # current

# set-option -g(lobal session) --------------------------------------------------------
set-option -g prefix C-a # Reset Prefix to Control + a
set-option -g xterm-keys on  # for vim
set-option -g status-keys vi # vi movement keys
set-option -g mode-keys vi   # Use vim keybindings in copy mode
set-option -g history-limit 50000 # large history

# set-option -p(ane) --------------------------------------------------------
# set-option -p window-style ''
# set-option -p window-active-style ''
# set-option -p pane-colours[0] colour2
# set-option -p pane-border-status top
# set-option -p pane-border-format "＜ #I. #T ＞"
# set-window-option -p pane-base-index 1 # based numbering
# set-window-option -p pane-border-indicators both # [colour|arrows|both]
# set-window-option -p pane-border-lines number # [single|double|heavy]
# set-window-option -p mode-style fg=colour13,reverse,bold # selection highlighting
# set-window-option -p window-style fg=colour13,bg=colour232 # terminal color
# set-window-option -p pane-border-style fg=colour250,bold,bg=colour232
# set-window-option -p pane-active-border-style fg=colour13,bold,bg=colour233

# set-window-option -p  display-panes-time 0 # (milliseconds) press any key to cancel
# set-window-option -p  display-panes-colour color13
# set-window-option -p  display-panes-active-colour color9


# set-window-option (window) -------------------------------------------------
# https://superuser.com/questions/1708413/how-to-automatically-rename-tmux-window-to-an-aliased-command
#set-window-option fill-character '😈'
# set-window-option clock-mode-style 24
# set-window-option clock-mode-colour color13
# set-window-option automatic-rename on # Automatically set window title
#set-window-option automatic-rename-format '#{b;s/your_username/~/:pane_current_path}'

# set-window-option -g(lobal window) -------------------------------------------------
# http://floriancrouzat.net/2010/07/run-tmux-with-mouse-support-in-mac-os-x-terminal-app/
# set-window-option -g mouse on
# set-window-option -g base-index 1 # based numbering
# set-window-option -g renumber-windows on # re-number windows when a window is closed
# set-window-option -g aggressive-resize on
# set-window-option -g cursor-colour color13
# set-window-option -g default-terminal "xterm-256color"
# #set-window-option -g terminal-features "256:RGB:ccolour:cstyle:ustyle:clipboard:mouse:focus:hyperlinks:strikethrough:sync:title"
# https://github.com/tmux/tmux/issues/2606
# https://unix.stackexchange.com/questions/568260/how-is-default-terminal-compared-to-tmux-terminal-overrides/568263#568263
# set-window-option -g terminal-overrides ',*-256color*:RGB:Tc' # See TMUX TERMINFO
# set-window-option -g terminal-overrides ':XT:smcup@:rmcup@' # UP and DOWN arrows

# }}}

# ############################################################################
# {{{ Unbindings
# ############################################################################

unbind [ # copy mode bound to escape key
unbind j
unbind C-b # unbind default leader key
unbind '"' # unbind horizontal split
unbind %   # unbind vertical split
unbind '(' # unbind kill previous session

# }}}

############################################################################
# {{{ Bindings
# - https://man.openbsd.org/OpenBSD-current/man1/tmux.1#DEFAULT_KEY_BINDINGS
############################################################################
bind-key a send-prefix # for nested tmux sessions

# reload tmux conf
bind-key R source-file ~/.tmux.conf \; \
display-message "Source file loaded!"

# #bind Escape copy-mode

# # break-pane
# bind-key Space resize-pane -Z

# # join-pane [-dhv] [-l size | -p percentage] [-s src-pane]
# # [-t:dst-window.dst-pane] (destination window (dot) destination pane
# #                (alias: joinp)
# #
# #bind C-j command-prompt "joinp"
# #bind C-j command-prompt "join-pane"
# #bind-key j command-prompt "join-pane -s '%%'"
# #bind-key j command-prompt "joinp -t:0"
# #bind-key Space command-prompt "joinp -t:%%" # %% = prompt for window.pane [-V|H] # vert|hor split

# }}}

############################################################################
# {{{ layouts
############################################################################

# Issue with special characters for tmux > 3.x
#   - https://github.com/tmux/tmux/issues/1827

bind-key 'C-r' rotate-window

bind-key '-' split-window -v # split pane horizontally
bind-key '\' split-window -h # split pane vertically

# layouts tiled, even-horizontal, even-vertical, main-horizontal, main-vertical
bind-key 'C-=' select-layout "tiled"
bind-key 'C--' select-layout "even-vertical"
bind-key 'C-\' select-layout "even-horizontal"

# }}}

############################################################################
# {{{ Status Bar
#   - Formats -- https://github.com/tmux/tmux/wiki/Formats
#   - https://tao-of-tmux.readthedocs.io/en/latest/manuscript/09-status-bar.html
############################################################################

# Multiple Status Lines
# set-window-option -g window-status-separator '|'
# set-window-option -g status-format[0] ' ◎ #F#W '
# set-window-option -g status-format[1] ' HOLY SHIT '
# set-window-option -g window-status-format ' ◎ #F#W '
# set-window-option -g window-status-style fg=magenta,dim,bg=default

# set-window-option -g window-status-bell-style
# set-window-option -g window-status-activity-style
# set-window-option -g window-status-current-format '#[fg=colour234]#[bg=magenta]◢#[default] ◉#[fg=default,underscore]#F#W #[default] #[fg=colour234]#[bg=magenta]◣#[default]'
# set-window-option -g window-status-current-style fg=brightmagenta,bold,bg=colour234

# set-window-option -g message-line 4 # ?????
# set-window-option -g message-command-style fg=colour132,bg=default
# set-window-option -g message-style fg=brightmagenta,blink,bold,reverse,bg=colour234
# # Titles (window number, program name, active (or not)
# set-window-option -g status 5 # lines (of|on|0-5)
# set-window-option -g set-titles on
# #set-window-option -g set-titles-string '#H:#S.#I.#P #W #T'
# set-window-option -g set-titles-string '#H:#S'

# set-window-option -g status-fg=blue
# set-window-option -g status-bg magenta
# # https://unix.stackexchange.com/questions/60968/tmux-bottom-bar-color-change/60969
# set -g status-style fg=default,bold,bg=default

# set-window-option -g status-interval 5
# set-window-option -g status-position top
# set-window-option -g status-justify absolute-centre # left, (absolute-)centre, right

# display-menu -t 1 -T "devPunks" -x 0 -y 0 "🤘😈🤘hello" z lsp

# set-window-option -g status-left-length 70
# set -g status-left-style fg=default,bold,bg=default
# https://stackoverflow.com/questions/16624752/tmux-how-to-configure-tmux-to-display-the-current-working-directory-of-a-pane-o
# set-window-option -g status-left  '#[bg=brightmagenta,dim,italics]#[fg=colour0,bold]📂#{=70:pane_current_path} #[default]'
# set-window-option -ga status-left ''
# set-window-option -g status-right-length 40
# set-window-option -g status-right-style ''
# set-window-option -g status-right '#[fg=colour231,italics]👨🏾‍💻#S #[default]#[fg=colour143,dim]🕛 %m-%d %R#(acpi | cut -d ',' -f 2) #[default]'
# set-window-option -ga status-right ''

# }}}
