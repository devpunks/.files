############################################################################
#  _
# | |_ _ __ ___  _   ___  __
# | __| '_ ` _ \| | | \ \/ /
# | |_| | | | | | |_| |>  <
#  \__|_| |_| |_|\__,_/_/\_\
#
# `property not found` issue:
#    - https://github.com/tmux/tmux/issues/1689
#
#  Cheatsheets:
#    - https://devhints.io/tmux
#    - https://tao-of-tmux.readthedocs.io
#    - https://jdhao.github.io/2021/01/25/tmux_cheatsheet
#
#  WIKI:
#    - https://github.com/tmux/tmux/wiki
#    - https://github.com/tmux/tmux/wiki/FAQ#how-do-i-translate--fg--bg-and--attr-options-into--style-options
#
############################################################################
BAR='BAZ'
#show-environment
display-message 'ðŸ˜ˆdevPunks'

# Interesting! ENVVARS only available via `display`
#set @pwd="#{PWD}"
display -p '#{BAR} #{PREFIX}'


############################################################################
# Global options
############################################################################

# set -q -g utf8 on
# set -g pane-border-status top
# set -g pane-border-format "ï¼œ #T ï¼ž"
# set-window-option -g cursor-colour brightmagenta
# set-window-option -g clock-mode-colour brightmagenta
# set-window-option -g history-limit 50000 # large history
# set-window-option -g default-terminal "xterm-256color"
# set-window-option -g terminal-overrides 'xterm*:XT:smcup@:rmcup@'
# set-window-option -g escape-time 10
# set-window-option -g visual-bell on
# set-window-option -g repeat-time 600
# set-window-option -g focus-events on
# set-window-option -g display-time 2000
# set-window-option -g visual-activity on
# set-window-option -g monitor-activity on
# set-window-option -g bell-action current
# set-window-option -g xterm-keys on  # for vim
# set-window-option -g mode-keys vi   # Use vim keybindings in copy mode
# set-window-option -g status-keys vi # vi movement keys
# 
############################################################################
# Bindings
############################################################################
# Reset Prefix to Control + a
set -g prefix C-a
bind-key a send-prefix # for nested tmux sessions
# bind C-a send-prefix

# reload tmux conf
bind-key R source-file ~/.tmux.conf \; \
  display-message "Source file loaded!"
# 
# #bind Escape copy-mode
# 
# # break-pane
# bind-key Space resize-pane -Z
# 
# # join-pane [-dhv] [-l size | -p percentage] [-s src-pane]
# # [-t:dst-window.dst-pane] (destination window (dot) destination pane
# #                (alias: joinp)
# #
# #bind C-j command-prompt "joinp"
# #bind C-j command-prompt "join-pane"
# #bind-key j command-prompt "join-pane -s '%%'"
# #bind-key j command-prompt "joinp -t:0"
# #bind-key Space command-prompt "joinp -t:%%" # %% = prompt for window.pane [-V|H] # vert|hor split
# 
# 
# ############################################################################
# # Unbindings
# ############################################################################
# 
# #unbind [ # copy mode bound to escape key
# unbind j
# unbind C-b # unbind default leader key
# unbind '"' # unbind horizontal split
# unbind %   # unbind vertical split
# unbind '(' # unbind kill previous session
# 
# 
# ############################################################################
# # Status Bar
# #   - Formats -- https://github.com/tmux/tmux/wiki/Formats
# #   - https://tao-of-tmux.readthedocs.io/en/latest/manuscript/09-status-bar.html
# ############################################################################
# # Titles (window number, program name, active (or not)
# set-window-option -g status on
# set-window-option -g status-fg=blue
# set-window-option -g status-bg magenta
# set-window-option -g set-titles on
# #set-window-option -g set-titles-string '#H:#S.#I.#P #W #T'
# set-window-option -g set-titles-string '#H:#S'
# 
# set-window-option -g status-interval 5
# set-window-option -g status-position top
# set-window-option -g status-justify centre # left, centre, right
# 
# # https://unix.stackexchange.com/questions/60968/tmux-bottom-bar-color-change/60969
# set -g status-style fg=default,bold,bg=default
# 
# set-window-option -g status-left-length 70
# 
# display-menu -t 1 -T "devPunks" -x 0 -y 0 "ðŸ¤˜ðŸ˜ˆðŸ¤˜hello" z lsp

# https://stackoverflow.com/questions/16624752/tmux-how-to-configure-tmux-to-display-the-current-working-directory-of-a-pane-o
set-window-option -g status-left  '#[bg=brightmagenta,dim,italics]#[fg=colour0,bold]ðŸ“‚#{=70:pane_current_path} #[default]'

set-window-option -g status-right-length 40
set-window-option -g status-right '#[fg=colour231,italics]ðŸ‘¨ðŸ¾â€ðŸ’»#S #[default]#[fg=colour143,dim]ðŸ•› %m-%d %R#(acpi | cut -d ',' -f 2) #[default]'

set-window-option -g window-status-separator '|'
set-window-option -g window-status-separator ''

set-window-option -g window-status-format ' â—Ž #F#W '
set-window-option -g window-status-style fg=magenta,dim,bg=default

set-window-option -g window-status-current-format '#[fg=colour234]#[bg=magenta]â—¢#[default] â—‰#[fg=default,underscore]#F#W #[default] #[fg=colour234]#[bg=magenta]â—£#[default]'
set-window-option -g window-status-current-style fg=brightmagenta,bold,bg=colour234

# set-window-option -g message-command-style fg=colour132,bg=default
# set-window-option -g message-style fg=brightmagenta,blink,bold,reverse,bg=colour234

# # Automatically set window title
# set-window-option -g automatic-rename on
# set-window-option -g automatic-rename-format '#{b;s/your_username/~/:pane_current_path}'
