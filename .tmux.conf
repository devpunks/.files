############################################################################
#  _
# | |_ _ __ ___  _   ___  __
# | __| '_ ` _ \| | | \ \/ /
# | |_| | | | | | |_| |>  <
#  \__|_| |_| |_|\__,_/_/\_\
#    - https://man.openbsd.org/OpenBSD-current/man1/tmux.1
#
# `property not found` issue:
#    - https://github.com/tmux/tmux/issues/1689
#
#  Cheatsheets:
#    - https://devhints.io/tmux
#    - https://tao-of-tmux.readthedocs.io
#    - https://jdhao.github.io/2021/01/25/tmux_cheatsheet
#    - https://www.seanh.cc/2020/12/28/setting-options-in-tmux/
#
#  WIKI:
#    - https://github.com/tmux/tmux/wiki
#    - https://github.com/tmux/tmux/wiki/FAQ#how-do-i-translate--fg--bg-and--attr-options-into--style-options
#
############################################################################
# run-shell - https://unix.stackexchange.com/questions/80473/how-do-i-run-a-shell-command-from-tmux-conf
# display-popup
#  - https://github.com/tmux/tmux/issues/1842
#  - https://aliquote.org/post/tmux-little-hacks/
#  - https://blog.meain.io/2020/tmux-flating-scratch-terminal/
#  - https://gist.github.com/LintaoAmons/22f6184b26bd5b93d8fe9f9276f50f75
BAR='BAZ'
set-environment DEVPUNKS 😈ROOOCKS

# show-environment
display-message '😈devPunks'

# Interesting! ENVVARS only available via `display`
set @pwd="#{PWD}"
display -p '#{BAR} #{PREFIX}'


############################################################################
# Options
#    - https://superuser.com/questions/1425920/different-between-set-g-and-setw-g-and-set
#    - https://superuser.com/questions/758843/difference-between-global-server-session-and-window-options
############################################################################

# set-option -s(erver) --------------------------------------------------------

# set-option (session) ------------------------------------------------
set-option prefix C-a # Reset Prefix to Control + a
set-window-option -g escape-time 50 # https://unix.stackexchange.com/questions/608142/whats-the-effect-of-escape-time-in-tmux
# https://blog.meain.io/2020/tmux-flating-scratch-terminal/
set-window-option -g repeat-time 1000 # holding arrow keys
# https://github.com/tmux-plugins/vim-tmux-focus-events
# https://stackoverflow.com/questions/28039788/window-focus-adds-characters-to-shell
set-window-option -g focus-events on
# https://unix.stackexchange.com/questions/307696/how-to-increase-tmux-pane-numbers-display-time-ctrl-b-q
set-window-option -g display-time 2000

# https://stackoverflow.com/questions/21947122/prevent-tmux-from-displaying-activity-in-window-n
# ittps://unix.stackexchange.com/questions/78093/how-can-i-make-tmux-monitor-a-window-for-inactivity
set-window-option -g visual-bell on
set-window-option -g visual-silence on
set-window-option -g visual-activity on
set-window-option -g monitor-bell on
set-window-option -g monitor-silence 1000
set-window-option -g monitor-activity on
set-window-option -g bell-action current
set-window-option -g window-status-bell-style
set-window-option -g window-status-activity-style

# set-option -g(lobal session) --------------------------------------------------------
set-option -g pane-border-status top
set-option -g pane-border-format "＜ #I. #T ＞"
set-option -g xterm-keys on  # for vim
set-option -g status-keys vi # vi movement keys
set-option -g mode-keys vi   # Use vim keybindings in copy mode
set-option -g history-limit 50000 # large history

# set-window-option (window) -------------------------------------------------
# https://superuser.com/questions/1708413/how-to-automatically-rename-tmux-window-to-an-aliased-command
set-window-option clock-mode-style 24
set-window-option clock-mode-colour color13
set-window-option automatic-rename on # Automatically set window title
set-window-option automatic-rename-format '#{b;s/your_username/~/:pane_current_path}'

# set-window-option -g(lobal window) -------------------------------------------------
# http://floriancrouzat.net/2010/07/run-tmux-with-mouse-support-in-mac-os-x-terminal-app/
set-window-option -g mouse on
set-window-option -g renumber-windows on # re-number windows when a window is closed
set-window-option -g cursor-colour color13
set-window-option -g default-terminal "xterm-256color"
# set-window-option -g terminal-overrides 'xterm*:XT:smcup@:rmcup@'

set-window-option -g window-status-separator '|'
set-window-option -g window-status-format ' ◎ #F#W '
# set-window-option -g window-status-style fg=magenta,dim,bg=default

# set-window-option -g window-status-current-format '#[fg=colour234]#[bg=magenta]◢#[default] ◉#[fg=default,underscore]#F#W #[default] #[fg=colour234]#[bg=magenta]◣#[default]'
# set-window-option -g window-status-current-style fg=brightmagenta,bold,bg=colour234

# set-window-option -g message-command-style fg=colour132,bg=default
# set-window-option -g message-style fg=brightmagenta,blink,bold,reverse,bg=colour234

# set-option -p(ane) --------------------------------------------------------
set-window-option -g window-style fg=colour13,bg=colour232 # terminal color
set-window-option -g mode-style fg=colour13,reverse,bold # selection highlighting


# set-window-option -g escape-time 10
# set-window-option -g repeat-time 600
# set-window-option -g focus-events on
# set-window-option -g display-time 2000
# set-window-option -g visual-activity on
# set-window-option -g monitor-activity on
# set-window-option -g bell-action current

############################################################################
# Bindings
# - https://man.openbsd.org/OpenBSD-current/man1/tmux.1#DEFAULT_KEY_BINDINGS
############################################################################
bind-key a send-prefix # for nested tmux sessions
# bind C-a send-prefix

# reload tmux conf
bind-key R source-file ~/.tmux.conf \; \
display-message "Source file loaded!"

# #bind Escape copy-mode

# # break-pane
# bind-key Space resize-pane -Z

# # join-pane [-dhv] [-l size | -p percentage] [-s src-pane]
# # [-t:dst-window.dst-pane] (destination window (dot) destination pane
# #                (alias: joinp)
# #
# #bind C-j command-prompt "joinp"
# #bind C-j command-prompt "join-pane"
# #bind-key j command-prompt "join-pane -s '%%'"
# #bind-key j command-prompt "joinp -t:0"
# #bind-key Space command-prompt "joinp -t:%%" # %% = prompt for window.pane [-V|H] # vert|hor split


# ############################################################################
# # Unbindings
# ############################################################################

# #unbind [ # copy mode bound to escape key
# unbind j
# unbind C-b # unbind default leader key
# unbind '"' # unbind horizontal split
# unbind %   # unbind vertical split
# unbind '(' # unbind kill previous session


# ############################################################################
# # Status Bar
# #   - Formats -- https://github.com/tmux/tmux/wiki/Formats
# #   - https://tao-of-tmux.readthedocs.io/en/latest/manuscript/09-status-bar.html
# ############################################################################
# # Titles (window number, program name, active (or not)
# set-window-option -g status on
# set-window-option -g status-fg=blue
# set-window-option -g status-bg magenta
# set-window-option -g set-titles on
# #set-window-option -g set-titles-string '#H:#S.#I.#P #W #T'
# set-window-option -g set-titles-string '#H:#S'

# set-window-option -g status-interval 5
# set-window-option -g status-position top
# set-window-option -g status-justify centre # left, centre, right

# # https://unix.stackexchange.com/questions/60968/tmux-bottom-bar-color-change/60969
# set -g status-style fg=default,bold,bg=default

# set-window-option -g status-left-length 70

# display-menu -t 1 -T "devPunks" -x 0 -y 0 "🤘😈🤘hello" z lsp

# https://stackoverflow.com/questions/16624752/tmux-how-to-configure-tmux-to-display-the-current-working-directory-of-a-pane-o
# set-window-option -g status-left  '#[bg=brightmagenta,dim,italics]#[fg=colour0,bold]📂#{=70:pane_current_path} #[default]'

# set-window-option -g status-right-length 40
# set-window-option -g status-right '#[fg=colour231,italics]👨🏾‍💻#S #[default]#[fg=colour143,dim]🕛 %m-%d %R#(acpi | cut -d ',' -f 2) #[default]'
